<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-177382419-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="icon" href="/directory/img/boar-head-rune-circle.svg">
<link rel="manifest" href="/directory/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)"><title data-react-helmet="true">Online PKI | Meerkat DSA</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.meerkat.wildboar.software/directory/docs/online-pki"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="keywords" content="directory, x500, x.500, ldap, database, meerkat, dsa, distributed"><meta data-react-helmet="true" name="copyright" content="Copyright (c) 2021 Jonathan M. Wilbur &lt;jonathan@wilbur.space&gt;."><meta data-react-helmet="true" property="og:title" content="Online PKI | Meerkat DSA"><meta data-react-helmet="true" name="description" content="OCSP and Remote CRLs"><meta data-react-helmet="true" property="og:description" content="OCSP and Remote CRLs"><link data-react-helmet="true" rel="icon" href="/directory/img/boar-head-rune-circle.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.meerkat.wildboar.software/directory/docs/online-pki"><link data-react-helmet="true" rel="alternate" href="https://docs.meerkat.wildboar.software/directory/docs/online-pki" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.meerkat.wildboar.software/directory/docs/online-pki" hreflang="x-default"><link rel="stylesheet" href="/directory/assets/css/styles.aaaf787b.css">
<link rel="preload" href="/directory/assets/js/runtime~main.33e87db8.js" as="script">
<link rel="preload" href="/directory/assets/js/main.42ba5da9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/directory/"><div class="navbar__logo"><img src="/directory/img/boar-head-rune-circle.svg" alt="Wildboar Software Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/directory/img/boar-head-rune-circle.svg" alt="Wildboar Software Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Meerkat DSA</b></a><a class="navbar__item navbar__link navbar__link--active" href="/directory/docs/setup">Get Started</a><a class="navbar__item navbar__link navbar__link--active" href="/directory/docs/docs">Documentation</a><a class="navbar__item navbar__link navbar__link--active" href="/directory/docs/specs">X.500 Specifications</a><a class="navbar__item navbar__link" href="/directory/docs/demo">Demo</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Wildboar-Software/directory" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleChecked_a04y toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" checked="" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/directory/docs/docs">How to use this documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/directory/docs/intro">X.500</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/directory/docs/setup">Meerkat DSA</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/setup">Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/env">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/webadmin">The Web Admin Console</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/database">Database Administration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/authorization">Authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/authentication">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/logging-monitoring">Logging and Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/schema">Schema Administration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/networking">Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/tls">Transport Layer Security (TLS)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/directory/docs/online-pki">Online PKI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/signing">Signed Operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/opbinding">Operational Bindings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/administration">Administration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/advice">Advice</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/usage">Usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/telemetry">Telemetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/conformance">Conformance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/deviations-nuances">Deviations and Nuances</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/information-disclosure">Information Disclosure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/roadmap">Roadmap</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/directory/docs/x500cli">Clients</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/directory/docs/tutorial01">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/directory/docs/asn1">Reference</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/directory/docs/support">Support / Help</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Online PKI</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ocsp-and-remote-crls">OCSP and Remote CRLs<a aria-hidden="true" class="hash-link" href="#ocsp-and-remote-crls" title="Direct link to heading">â€‹</a></h2><p>It is important that you understand the risks of using the
<a href="https://en.wikipedia.org/wiki/Online_Certificate_Status_Protocol" target="_blank" rel="noopener noreferrer">Online Certificate Status Protocol (OCSP)</a>
and/or remote CRLs for the validation of a certificate chain. These features can
be useful for obtaining timely notification of certificate revocation. However,
these features also come at cost.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="pros">Pros<a aria-hidden="true" class="hash-link" href="#pros" title="Direct link to heading">â€‹</a></h3><p>You can get up-to-date information on certificate revocation. This means that,
if somebody&#x27;s private key gets hacked, their certificate can get added to the
OCSP responder&#x27;s list of revoked certificates, and your DSA will know about it
as soon as the OCSP responder is queried again for that certificate&#x27;s status.
The same can be said for remote CRLs.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="cons">Cons<a aria-hidden="true" class="hash-link" href="#cons" title="Direct link to heading">â€‹</a></h3><p>The first downside is latency. Since both OCSP and remote CRLs require network
requests, they will introduce high latency to the verification. If your DSA&#x27;s
users are submitting many requests synchronously, and in rapid succession, such
as may be the case in bulk-loading, the latency introduced may be unacceptable.</p><p>Meerkat DSA currently caches recently fetched remote CRLs, but this is currently
not configurable. Meerkat DSA does not cache OCSP responses at all.</p><p>The second downside is, ironically, security vulnerabilities: enabling these
features means that user inputs can make your Meerkat DSA make certain requests
to arbitrary hosts/services. This can be used (among other things) by attackers
to scan your network. Meerkat DSA does not really have any defense against this
currently (one possible defense would be to block the use of IP addresses as
CRL distribution points and OCSP responders entirely, but this requires further
study).</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>No matter what Meerkat DSA implements, you should always secure your
network. If you are using Kubernetes, you can (and should) configure network
policies. Generally speaking, Meerkat DSA does not need to access anything in
your internal network except for the MySQL database.</p></div></div><p><a href="https://liveoverflow.com/gitlab-11-4-7-remote-code-execution-real-world-ctf-2018/" target="_blank" rel="noopener noreferrer">Here is an example of what can go wrong if you enable these</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="recommendation">Recommendation<a aria-hidden="true" class="hash-link" href="#recommendation" title="Direct link to heading">â€‹</a></h3><p>By default, OCSP and remote CRL checking are <em>disabled</em> in Meerkat DSA. It is
the opinion of the developer of Meerkat DSA, Jonathan Wilbur, that the risks of
enabling these protocols outweighs the gains to be had from a more timely
notification of certificate revocation (which should be an infrequent event in
general).</p><p>In lieu thereof, it is recommended to implement automation to obtain up-to-date
CRLs and simply update the
<a href="/directory/docs/env#meerkatsigningcrlfile"><code>MEERKAT_SIGNING_CRL_FILE</code></a> file and restart
Meerkat DSA every so often so that it is up-to-date. This will be far more
performant, far more secure, and can still give you very fresh information, if
you choose to update it frequently.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="answering-ocsp-requests">Answering OCSP Requests<a aria-hidden="true" class="hash-link" href="#answering-ocsp-requests" title="Direct link to heading">â€‹</a></h3><p>Meerkat DSA can also be configured to provide OCSP requests for its own
configured TLS certificate on demand. If
<a href="/directory/docs/env#meerkattlsanswerocsprequests"><code>MEERKAT_TLS_ANSWER_OCSP_REQUESTS</code></a> is
set to <code>1</code> (enabled), Meerkat DSA will staple OCSP requests in the TLS
handshake. This option does not affect how Meerkat DSA validates other TLS or
signing peers.</p><p>Meerkat DSA only responds to OCSP requests over implicit TLS (not StartTLS).</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="server-based-certificate-validation-protocol-scvp">Server-Based Certificate Validation Protocol (SCVP)<a aria-hidden="true" class="hash-link" href="#server-based-certificate-validation-protocol-scvp" title="Direct link to heading">â€‹</a></h2><p>Meerkat DSA does not currently support
<a href="https://en.wikipedia.org/wiki/SCVP" target="_blank" rel="noopener noreferrer">Server-Based Certificate Validation Protocol (SCVP)</a>,
but it will eventually. This means that, when presented with a signed arguments,
results, or errors, along with a certificate or certificate chain, Meerkat DSA
will be able to offload the verification of the digital signatures and the
certification path to the SCVP server. This may also have the benefit of finer
controls over the certification path verification that would make Meerkat DSA
too bloated if implemented.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Wildboar-Software/directory/edit/main/website/docs/online-pki.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/directory/docs/tls"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Transport Layer Security (TLS)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/directory/docs/signing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Signed Operations<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ocsp-and-remote-crls" class="table-of-contents__link toc-highlight">OCSP and Remote CRLs</a><ul><li><a href="#pros" class="table-of-contents__link toc-highlight">Pros</a></li><li><a href="#cons" class="table-of-contents__link toc-highlight">Cons</a></li><li><a href="#recommendation" class="table-of-contents__link toc-highlight">Recommendation</a></li><li><a href="#answering-ocsp-requests" class="table-of-contents__link toc-highlight">Answering OCSP Requests</a></li></ul></li><li><a href="#server-based-certificate-validation-protocol-scvp" class="table-of-contents__link toc-highlight">Server-Based Certificate Validation Protocol (SCVP)</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Wildboar Software. Built with Docusaurus.</div></div></div></footer></div>
<script src="/directory/assets/js/runtime~main.33e87db8.js"></script>
<script src="/directory/assets/js/main.42ba5da9.js"></script>
</body>
</html>