<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-177382419-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="icon" href="/directory/img/boar-head-rune-circle.svg">
<link rel="manifest" href="/directory/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)"><title data-react-helmet="true">Networking | Meerkat DSA</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.meerkat.wildboar.software/directory/docs/networking"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="keywords" content="directory, x500, x.500, ldap, database, meerkat, dsa, distributed"><meta data-react-helmet="true" name="copyright" content="Copyright (c) 2021 Jonathan M. Wilbur &lt;jonathan@wilbur.space&gt;."><meta data-react-helmet="true" property="og:title" content="Networking | Meerkat DSA"><meta data-react-helmet="true" name="description" content="Preface on Directory Protocols"><meta data-react-helmet="true" property="og:description" content="Preface on Directory Protocols"><link data-react-helmet="true" rel="icon" href="/directory/img/boar-head-rune-circle.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.meerkat.wildboar.software/directory/docs/networking"><link data-react-helmet="true" rel="alternate" href="https://docs.meerkat.wildboar.software/directory/docs/networking" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.meerkat.wildboar.software/directory/docs/networking" hreflang="x-default"><link rel="stylesheet" href="/directory/assets/css/styles.aaaf787b.css">
<link rel="preload" href="/directory/assets/js/runtime~main.33e87db8.js" as="script">
<link rel="preload" href="/directory/assets/js/main.42ba5da9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/directory/"><div class="navbar__logo"><img src="/directory/img/boar-head-rune-circle.svg" alt="Wildboar Software Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/directory/img/boar-head-rune-circle.svg" alt="Wildboar Software Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Meerkat DSA</b></a><a class="navbar__item navbar__link navbar__link--active" href="/directory/docs/setup">Get Started</a><a class="navbar__item navbar__link navbar__link--active" href="/directory/docs/docs">Documentation</a><a class="navbar__item navbar__link navbar__link--active" href="/directory/docs/specs">X.500 Specifications</a><a class="navbar__item navbar__link" href="/directory/docs/demo">Demo</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Wildboar-Software/directory" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleChecked_a04y toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" checked="" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/directory/docs/docs">How to use this documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/directory/docs/intro">X.500</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/directory/docs/setup">Meerkat DSA</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/setup">Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/env">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/webadmin">The Web Admin Console</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/database">Database Administration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/authorization">Authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/authentication">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/logging-monitoring">Logging and Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/schema">Schema Administration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/directory/docs/networking">Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/tls">Transport Layer Security (TLS)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/online-pki">Online PKI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/signing">Signed Operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/opbinding">Operational Bindings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/administration">Administration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/advice">Advice</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/usage">Usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/telemetry">Telemetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/conformance">Conformance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/deviations-nuances">Deviations and Nuances</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/information-disclosure">Information Disclosure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/directory/docs/roadmap">Roadmap</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/directory/docs/x500cli">Clients</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/directory/docs/tutorial01">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/directory/docs/asn1">Reference</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/directory/docs/support">Support / Help</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Networking</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="preface-on-directory-protocols">Preface on Directory Protocols<a aria-hidden="true" class="hash-link" href="#preface-on-directory-protocols" title="Direct link to heading">â€‹</a></h2><p>In TCP/IP networking, there is generally a one-to-one correspondence between a
TCP port and a protocol. You don&#x27;t usually listen on a given TCP port for, say,
both HTTP and FTP and SSH traffic. In directory systems, network transport is
logically separated from the <em>session</em>, such that you can reuse the same
transport connection to relay multiple protocols. Hence, to clarify the use of
terminology here, a &quot;transport&quot; means the stack of protocols by which two
hosts are networked and X.500 operations are relayed between them, and an
&quot;association&quot; is a logical connection established by a bind operation that is
transported over a &quot;transport.&quot; Within the same transport, multiple associations
may be made serially (but not in parallel), via binding and unbinding.</p><p>This means that, when Meerkat DSA listens for IDM transport on a given TCP port,
DAP, DOP, DISP, and DSP associations may be established using IDM transport on
that TCP port. This defies the usual &quot;one-port-per-service&quot; model often used by
TCP/IP services.</p><p>Note that the above does <em>not</em> apply to LDAP, since LDAP is ALWAYS transported
over &quot;raw&quot; TCP without IDM, ITOT, or any other OSI transport mechanism layered
on top.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="directory-transport-protocols">Directory Transport Protocols<a aria-hidden="true" class="hash-link" href="#directory-transport-protocols" title="Direct link to heading">â€‹</a></h2><p>Currently, Meerkat DSA only supports the transport of X.500 protocols via IDM
or IDMS (IDM encapsulated in TLS).
LDAP may be used as well, and may be optionally encapsulated in TLS. For both
categories of protocols, StartTLS may be used as well.</p><p>The protocols which Meerkat DSA uses can be controlled by the following
environment variables, which specify the port number on which these services
listen:</p><ul><li><code>MEERKAT_WEB_ADMIN_PORT</code> (Recommended: 18080; be careful when exposing this.)</li><li><code>MEERKAT_IDM_PORT</code> (Recommended: 4632)</li><li><code>MEERKAT_IDMS_PORT</code> (Recommended: 44632)</li><li><code>MEERKAT_LDAP_PORT</code> (Recommended: 389; requires root privileges)</li><li><code>MEERKAT_LDAPS_PORT</code> (Recommended: 636; requires root privileges)</li></ul><p>If a port number is set, Meerkat DSA listens on that port for the given service.
If no port is set, that service does not listen at all. This means that it is
possible to run Meerkat DSA as an LDAP-only or X.500-only server by simply
not configuring ports for those services.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="distributed-operation">Distributed Operation<a aria-hidden="true" class="hash-link" href="#distributed-operation" title="Direct link to heading">â€‹</a></h2><p>For distributed operations, Meerkat DSA stores the access points obtained from
knowledge attributes in the <code>AccessPoint</code> table. Currently, Meerkat DSA can only
make use of IDM-based (and IDMS-based) access points. All other access points
will be ignored.</p><p>You may directly alter the rows in the <code>AccessPoint</code> table to add or remove
access points, but Meerkat DSA may have to be restarted for your changes to
take effect. (We say &quot;may&quot; literally: it might not require a restart if you are
not using in-memory caching of the DIT.) It is recommended that you instead use
the Directory Access Protocol with the <code>manageDSAIT</code> flag set to modify
knowledge attributes rather than altering the database directly.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="dns-configuration">DNS Configuration<a aria-hidden="true" class="hash-link" href="#dns-configuration" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="dns-records">DNS Records<a aria-hidden="true" class="hash-link" href="#dns-records" title="Direct link to heading">â€‹</a></h3><p>It is not necessary at all, but for the sake of service discovery, it is
recommended that you configure DNS for your domain to name your directory as
a service using <code>SRV</code> records. If you want to keep your directory a secret, it
is advised that you refrain from exposing it to the global Internet at all.</p><p>SRV records should be defined for IDM, IDMS, LDAP, and LDAPS like so:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">_idm._tcp.example.com 3600 IN SRV 0 5 &lt;IDM port number&gt; dsa01.example.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">_idms._tcp.example.com 3600 IN SRV 0 5 &lt;IDMS port number&gt; dsa01.example.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">_ldap._tcp.example.com 3600 IN SRV 0 5 &lt;LDAP port number&gt; dsa01.example.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">_ldaps._tcp.example.com 3600 IN SRV 0 5 &lt;LDAPS port number&gt; dsa01.example.com</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Note that, in the above example you will need to swap out <code>example.com</code> with
your domain, <code>dsa01</code> with your DSA&#x27;s host name, the port numbers enclosed in
brackets above and configure the other SRV record parameters as you see fit.</p><p>You will also need A and/or AAAA records corresponding to the hostnames on the
right hand side of the SRV records.</p><p>Again, DNS configuration is NOT required for Meerkat DSA to work.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="dns-client">DNS Client<a aria-hidden="true" class="hash-link" href="#dns-client" title="Direct link to heading">â€‹</a></h3><p>Meerkat DSA runs on NodeJS, which uses the <code>c-ares</code> library under the hood.
NodeJS does not expose any functionality for tuning DNS resolution. Fortunately,
you can tune it using the <code>RES_OPTIONS</code> environment variable, which is
documented <a href="https://manpages.ubuntu.com/manpages/kinetic/en/man3/ares_init_options.3.html" target="_blank" rel="noopener noreferrer">here</a>.</p><p>You generally should not mess with this unless you&#x27;re seeing DNS resolution
issues. I have personally seen this happen when I change networks while still
connected to a VPN, but I think this is a pretty uncommon issue.</p><p>See <a href="https://stackoverflow.com/a/45403565/6562635" target="_blank" rel="noopener noreferrer">this StackOverflow answer</a>
for help.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>This is liable to change if <a href="https://bun.sh/" target="_blank" rel="noopener noreferrer">Bun</a> proves to be a viable NodeJS
alternative. I do not know what it uses for DNS under the hood.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="the-future">The Future<a aria-hidden="true" class="hash-link" href="#the-future" title="Direct link to heading">â€‹</a></h2><p>In the future, Meerkat DSA may support:</p><ul><li>TOR / Onion Routing / SOCKS Transport</li><li>ZMQ Transport</li><li>ITOT Transport</li><li>LPP Transport</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Wildboar-Software/directory/edit/main/website/docs/networking.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/directory/docs/schema"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Schema Administration</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/directory/docs/tls"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Transport Layer Security (TLS)<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preface-on-directory-protocols" class="table-of-contents__link toc-highlight">Preface on Directory Protocols</a></li><li><a href="#directory-transport-protocols" class="table-of-contents__link toc-highlight">Directory Transport Protocols</a></li><li><a href="#distributed-operation" class="table-of-contents__link toc-highlight">Distributed Operation</a></li><li><a href="#dns-configuration" class="table-of-contents__link toc-highlight">DNS Configuration</a><ul><li><a href="#dns-records" class="table-of-contents__link toc-highlight">DNS Records</a></li><li><a href="#dns-client" class="table-of-contents__link toc-highlight">DNS Client</a></li></ul></li><li><a href="#the-future" class="table-of-contents__link toc-highlight">The Future</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Wildboar Software. Built with Docusaurus.</div></div></div></footer></div>
<script src="/directory/assets/js/runtime~main.33e87db8.js"></script>
<script src="/directory/assets/js/main.42ba5da9.js"></script>
</body>
</html>