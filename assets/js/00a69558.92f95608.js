"use strict";(self.webpackChunkdirectory=self.webpackChunkdirectory||[]).push([[804],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=i.createContext({}),c=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(n),h=r,m=u["".concat(s,".").concat(h)]||u[h]||p[h]||a;return n?i.createElement(m,o(o({ref:t},d),{},{components:n})):i.createElement(m,o({ref:t},d))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<a;c++)o[c]=n[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},1362:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>s,default:()=>u,frontMatter:()=>l,metadata:()=>c,toc:()=>d});var i=n(7462),r=n(3366),a=(n(7294),n(3905)),o=["components"],l={},s="Transport Layer Security (TLS)",c={unversionedId:"tls",id:"tls",title:"Transport Layer Security (TLS)",description:"TLS is an essential part of directory security. It gives your directory",source:"@site/docs/tls.md",sourceDirName:".",slug:"/tls",permalink:"/directory/docs/tls",editUrl:"https://github.com/Wildboar-Software/directory/edit/main/website/docs/tls.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Networking",permalink:"/directory/docs/networking"},next:{title:"Online PKI",permalink:"/directory/docs/online-pki"}},d=[{value:"TLS Configuration",id:"tls-configuration",children:[],level:2},{value:"TLS Client Certificate Authentication",id:"tls-client-certificate-authentication",children:[],level:2},{value:"Disabling Server Authentication",id:"disabling-server-authentication",children:[],level:2},{value:"The Web Admin Console",id:"the-web-admin-console",children:[],level:2}],p={toc:d};function u(e){var t=e.components,n=(0,r.Z)(e,o);return(0,a.kt)("wrapper",(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"transport-layer-security-tls"},"Transport Layer Security (TLS)"),(0,a.kt)("p",null,"TLS is an essential part of directory security. It gives your directory\npoint-to-point confidentiality and integrity."),(0,a.kt)("p",null,"However, it ",(0,a.kt)("em",{parentName:"p"},"does not")," give your directory operations end-to-end integrity;\nintermediary DSAs may spoof arguments, results, and errors, except when signing\nis used. See ",(0,a.kt)("a",{parentName:"p",href:"/directory/docs/signing"},"here")," for information on configuring signing."),(0,a.kt)("h2",{id:"tls-configuration"},"TLS Configuration"),(0,a.kt)("p",null,"TLS can be configured via the following environment variables:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"MEERKAT_TLS_CERT_FILE")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"MEERKAT_TLS_KEY_FILE"))),(0,a.kt)("p",null,"Or by including"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"MEERKAT_TLS_PFX_FILE"))),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"MEERKAT_TLS_CERT_FILE")," contains a file path to the X.509 certificate to be\nused for TLS. ",(0,a.kt)("inlineCode",{parentName:"p"},"MEERKAT_TLS_KEY_FILE")," shall contain the file path to the\nprivate key to be used for TLS. If both of these are present, TLS will be\nenabled. Otherwise, TLS will silently fail."),(0,a.kt)("p",null,"If either the key file or PFX file are password-protected, these can be\ndecrypted by supplying the passphrase in the ",(0,a.kt)("inlineCode",{parentName:"p"},"MEERKAT_TLS_KEY_PASSPHRASE"),"\nenvironment variable."),(0,a.kt)("p",null,"Almost all TLS-related environment variables start with ",(0,a.kt)("inlineCode",{parentName:"p"},"MEERKAT_TLS_"),"."),(0,a.kt)("p",null,"You can configure your trust anchors (root certificate authorities) through the\nuse of the ",(0,a.kt)("a",{parentName:"p",href:"./env#meerkattlscafile"},(0,a.kt)("inlineCode",{parentName:"a"},"MEERKAT_TLS_CA_FILE"))," environment variable.\nThe file referred to by this variable contains the certificate authorities used\nto verify TLS peers. If unset, this defaults to a bundle of trust anchors that\nare built-in to the NodeJS runtime."),(0,a.kt)("h2",{id:"tls-client-certificate-authentication"},"TLS Client Certificate Authentication"),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"TLS Client Certificate Authentication is also known as\n",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Mutual_authentication#mTLS"},'"Mutual TLS" or "mTLS"'),"."))),(0,a.kt)("p",null,"One way to greatly enhance the security of your directory is to require TLS\nclient certificate authentication. If you use TLS client certificate\nauthentication, clients that (attempt to) connect to your directory will be\nrequired to present proof of possession of a private key whose validity can be\ntraced back to a configured trust anchor. This is much more secure than a\npassword, and it blocks clients at the TLS socket, rather than at the\napplication layer, meaning that a smaller attack surface is exposed by a DSA\nconfigured as such."),(0,a.kt)("p",null,"As long as you have TLS already configured (as described above), all you need to\ndo to enable this is set the environment variable\n",(0,a.kt)("a",{parentName:"p",href:"/directory/docs/env#meerkattlsrejectunauthorizedclients"},(0,a.kt)("inlineCode",{parentName:"a"},"MEERKAT_TLS_REJECT_UNAUTHORIZED_CLIENTS")),"\nto ",(0,a.kt)("inlineCode",{parentName:"p"},"1")," (enabled)."),(0,a.kt)("h2",{id:"disabling-server-authentication"},"Disabling Server Authentication"),(0,a.kt)("p",null,"Yes, it is possible to disable server authentication. You can do this by setting\nthe environment variable\n",(0,a.kt)("a",{parentName:"p",href:"/directory/docs/env#meerkattlsrejectunauthorizedclients"},(0,a.kt)("inlineCode",{parentName:"a"},"MEERKAT_TLS_REJECT_UNAUTHORIZED_SERVERS")),"\nto ",(0,a.kt)("inlineCode",{parentName:"p"},"0")," (disabled). This will cause Meerkat DSA to ignore an invalid\ncertification path presented by a server to which it connects."),(0,a.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"If you disable server authentication, it mitigates the protection afforded by\nTLS; anybody can impersonate the server. If you disable server authentication"))),(0,a.kt)("h2",{id:"the-web-admin-console"},"The Web Admin Console"),(0,a.kt)("p",null,"Enabling TLS is also critical for securing your web admin console (if enabled).\nSee more information ",(0,a.kt)("a",{parentName:"p",href:"/directory/docs/webadmin#tls"},"here"),"."))}u.isMDXComponent=!0}}]);