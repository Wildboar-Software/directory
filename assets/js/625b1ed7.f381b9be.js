"use strict";(self.webpackChunkdirectory=self.webpackChunkdirectory||[]).push([[168],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(n),h=r,m=p["".concat(l,".").concat(h)]||p[h]||u[h]||o;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var d=2;d<o;d++)i[d]=n[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},8851:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>d,toc:()=>c});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],s={},l="Authentication",d={unversionedId:"authentication",id:"authentication",title:"Authentication",description:"Meerkat DSA only supports simple authentication (meaning authentication with a",source:"@site/docs/authentication.md",sourceDirName:".",slug:"/authentication",permalink:"/directory/docs/authentication",editUrl:"https://github.com/Wildboar-Software/directory/edit/main/website/docs/authentication.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Authorization",permalink:"/directory/docs/authorization"},next:{title:"Logging and Monitoring",permalink:"/directory/docs/logging-monitoring"}},c=[{value:"Anonymous Authentication",id:"anonymous-authentication",children:[],level:2},{value:"How Meerkat DSA Handles Passwords",id:"how-meerkat-dsa-handles-passwords",children:[],level:2},{value:"How to Change Passwords",id:"how-to-change-passwords",children:[],level:2},{value:"Password Policy",id:"password-policy",children:[],level:2},{value:"Request Signatures",id:"request-signatures",children:[],level:2},{value:"Architectural Details",id:"architectural-details",children:[],level:2}],u={toc:c};function p(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"authentication"},"Authentication"),(0,o.kt)("p",null,"Meerkat DSA only supports simple authentication (meaning authentication with a\npassword) in DAP, LDAP, DSP, and DOP, though a future version will support\nstrong authentication (authentication using X.509 certificate and asymmetric\ncryptography), and SASL and SPKM might be supported. These other authentication\nschemes may only be made available in paid versions; simple authentication will\nalways be available with the free edition of Meerkat DSA."),(0,o.kt)("h2",{id:"anonymous-authentication"},"Anonymous Authentication"),(0,o.kt)("p",null,"Users of Meerkat DSA may bind anonymously by supplying no password. If this is\nused, authentication will always succeed, even if the bound distinguished name\ndoes not correspond to any real entry present and even if the entry ",(0,o.kt)("em",{parentName:"p"},"does")," exist\nand has a password. This behavior is to avoid information disclosure."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},'NOTE: If Meerkat DSA did not do this, it would be possible for a nefarious\nactor to enumerate the entries in a DSA, despite access controls, by guessing\ndistinguished names in the bind operation and seeing which attempts come back\nwith errors saying "entry does not exist" and which come back with "invalid\npassword." This is the same reason that websites with logins must give you the\nsame error message, regardless of whether you got the username or password\nwrong.')),(0,o.kt)("p",null,"When users are bound anonymously, they may perform operations against Meerkat\nDSA. It is the responsibility of administrators to configure access controls to\nprevent anonymous users from doing things they should not be able to do."),(0,o.kt)("p",null,"Currently, anonymous usage can only be prevented by access control, but a future\nfeature will enable administrators to reject all anonymous traffic."),(0,o.kt)("h2",{id:"how-meerkat-dsa-handles-passwords"},"How Meerkat DSA Handles Passwords"),(0,o.kt)("p",null,"In the X.500 specifications, there is no specified attribute that is expected to\nserve as the authoritative source of the password for an entry. Each DSA may\nchoose to use a different attribute type to store password information; in fact,\npasswords might not even be stored in entries at all! This is why the\n",(0,o.kt)("inlineCode",{parentName:"p"},"administerPassword")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"changePassword")," operations were introduced to the\nDirectory Access Protocol (DAP)."),(0,o.kt)("p",null,"In Meerkat DSA, both the ",(0,o.kt)("inlineCode",{parentName:"p"},"userPassword")," attribute (specified in\n",(0,o.kt)("a",{parentName:"p",href:"https://www.itu.int/rec/T-REC-X.509/en"},"ITU Recommendation X.509"),") and the\n",(0,o.kt)("inlineCode",{parentName:"p"},"userPwd")," attribute (specified in\n",(0,o.kt)("a",{parentName:"p",href:"https://www.itu.int/rec/T-REC-X.520/en"},"ITU Recommendation X.520"),") are used.\nHowever, regardless of any access controls, whenever these values are read, they\nreturn empty strings. This is because passwords are extremely sensitive, and\nlet's face it: people re-use passwords between services. To prevent\nadministrators from misconfiguring Meerkat DSA and leaking all of their users'\npasswords, the passwords are simply never returned, even if queried directly,\nand even if access controls permit it. An empty string is returned as the value\nso that directory users can at least know ",(0,o.kt)("em",{parentName:"p"},"if")," an entry has a password. In other\nwords, passwords are ",(0,o.kt)("em",{parentName:"p"},"write-only")," in Meerkat DSA."),(0,o.kt)("p",null,"The password is stored in the database. If password is supplied using cleartext,\nit will be salted and hashed using the Scrypt algorithm and stored in the\ndatabase. If the password is already encrypted / hashed, it will be stored using\nthe algorithm that was used to encrypt it."),(0,o.kt)("h2",{id:"how-to-change-passwords"},"How to Change Passwords"),(0,o.kt)("p",null,"It is recommended to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"administerPassword")," and/or ",(0,o.kt)("inlineCode",{parentName:"p"},"changePassword"),"\noperations to modify an entry's password."),(0,o.kt)("h2",{id:"password-policy"},"Password Policy"),(0,o.kt)("p",null,"Password policy, as specified in\n",(0,o.kt)("a",{parentName:"p",href:"https://www.itu.int/rec/T-REC-X.509/en"},"ITU Recommendation X.509")," is not\ncurrently supported. Future editions of Meerkat DSA will support X.509 Password\nPolicies, though there may only be a subset of these features available for the\nfree edition of Meerkat DSA (which is not to imply that ",(0,o.kt)("em",{parentName:"p"},"all")," of these features\nwill be available in the paid version)."),(0,o.kt)("h2",{id:"request-signatures"},"Request Signatures"),(0,o.kt)("p",null,"Request signatures are not currently validated, but will be in future versions\nof Meerkat DSA."),(0,o.kt)("h2",{id:"architectural-details"},"Architectural Details"),(0,o.kt)("p",null,"You might notice that it can take a few seconds to authenticate to Meerkat DSA.\nThis is no accident."),(0,o.kt)("p",null,"Authentication is protected against\n",(0,o.kt)("a",{parentName:"p",href:"https://ropesec.com/articles/timing-attacks/"},"timing attacks")," by response time\nrandomization and constant-time string comparison. (These two methods may seem\nto contradict each other, and you'd be right to point that out; however, both\nare used so that, if one does not work, the other will.) By default, Meerkat DSA\nalways waits one second, but potentially up to two seconds, before responding\nwith an authentication result. Response time randomization can be configured by administrators via the ",(0,o.kt)("inlineCode",{parentName:"p"},"MEERKAT_BIND_MIN_SLEEP_MS"),"\nand ",(0,o.kt)("inlineCode",{parentName:"p"},"MEERKAT_BIND_SLEEP_RANGE_MS")," environment variables."),(0,o.kt)("p",null,"Notably, Meerkat DSA does not sleep for a random amount of time, perform the\ncredential evaluation, then return a result; it performs a credential evaluation\nthen waits the remaining amount of time such that the randomly-selected sleep\ntime has passed. If the former methodology were used, nefarious actors could\nstill perform a timing attack by attempting authentication many times to see\nwhich attempts take the longest response time on average."))}p.isMDXComponent=!0}}]);