"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1101],{1184(e,n,i){i.d(n,{R:()=>r,x:()=>s});var t=i(4041);const a={},o=t.createContext(a);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(o.Provider,{value:n},e.children)}},4865(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>c,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"tutorial03","title":"Tutorial 3: Add NHOBs and Subordinates","description":"Non-Specific Operational Bindings (NHOB) allow multiple DSAs to share a","source":"@site/docs/tutorial03.md","sourceDirName":".","slug":"/tutorial03","permalink":"/directory/docs/tutorial03","draft":false,"unlisted":false,"editUrl":"https://github.com/Wildboar-Software/directory/edit/main/website/docs/tutorial03.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Tutorial 2: Hooking up Gitea with Meerkat DSA","permalink":"/directory/docs/tutorial02"},"next":{"title":"ASN.1 Modules","permalink":"/directory/docs/asn1"}}');var a=i(1085),o=i(1184);const r={},s="Tutorial 3: Add NHOBs and Subordinates",d={},l=[{value:"Relayed Operational Bindings",id:"relayed-operational-bindings",level:2},{value:"Client Setup",id:"client-setup",level:3},{value:"Scenario and Setup for Both Approaches",id:"scenario-and-setup-for-both-approaches",level:2},{value:"Procedures for Superior-Initiated NHOBs",id:"procedures-for-superior-initiated-nhobs",level:2},{value:"Procedures for Subordinate-Initiated NHOBs",id:"procedures-for-subordinate-initiated-nhobs",level:2},{value:"Using the AddEntry operation to Add NHOB Subordinate Entries",id:"using-the-addentry-operation-to-add-nhob-subordinate-entries",level:2},{value:"Terminating an NHOB",id:"terminating-an-nhob",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"tutorial-3-add-nhobs-and-subordinates",children:"Tutorial 3: Add NHOBs and Subordinates"})}),"\n",(0,a.jsx)(n.p,{children:"Non-Specific Operational Bindings (NHOB) allow multiple DSAs to share a\nnamespace immediately subordinate to an entry. This special entry that serves as\nthe immediate superior to this shared namespace is referred to as a\nNon-Specific Subordinate Reference (NSSR). As a part of it's role as an NSSR, it\nstores the exhaustive list of access points for the subordinate DSAs where all\nimmediate subordinates may be found."}),"\n",(0,a.jsxs)(n.p,{children:["In this tutorial, you will learn how to use the\n",(0,a.jsx)(n.a,{href:"/directory/docs/x500cli",children:"X.500 command-line interface"})," to set up an NHOB in your DSA."]}),"\n",(0,a.jsx)(n.p,{children:"There are two ways that NHOBs can be created in X.500 directories: from the\nsuperior to the subordinate DSAs, or vice versa. In other words, the superior\nDSA can solicit subordinate DSAs to share a namespace below one of its entries,\nor a subordinate DSA can request to join such a namespace within a superior DSA.\nWe will review both here."}),"\n",(0,a.jsx)(n.h2,{id:"relayed-operational-bindings",children:"Relayed Operational Bindings"}),"\n",(0,a.jsxs)(n.p,{children:["Though the X.500 specifications formalize the means by which operational\nbindings are established, modified, and terminated between DSAs, some\noperational bindings have no defined procedures for being triggered by the\nadministrator. To create a normal Hierarchical Operational Binding (HOB), you\ncan use the ",(0,a.jsx)(n.code,{children:"addEntry"})," operation with the ",(0,a.jsx)(n.code,{children:"targetSystem"})," component, which\nshould trigger a DSA to establish a new Hierarchical Operational Binding."]}),"\n",(0,a.jsxs)(n.p,{children:["This is NOT the case for an NHOB. There is no defined way in the X.500\nspecifications to induce a DSA to establish an NHOB with another DSA. For this\nreason, Wildboar Software implemented a feature in Meerkat DSA that makes this\npossible:\n",(0,a.jsx)(n.a,{href:"/directory/docs/opbinding#relayed-operational-bindings",children:"Relayed Operational Bindings"}),"."]}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"You do not need to know how Relayed Operational Bindings work, but you should\nknow that this tutorial will only apply to Meerkat DSA because of this feature."})}),"\n",(0,a.jsx)(n.h3,{id:"client-setup",children:"Client Setup"}),"\n",(0,a.jsxs)(n.p,{children:["The use of Relayed Operational Bindings requires the DUA to use the ",(0,a.jsx)(n.em,{children:"exact same"}),'\nsigning key as is used by the DSA for signing the DOP request. This basically\ninforms the DSA that "I have permission to act on behalf of you, the DSA. I am\nclearly an administrator because I possess your signing key." You will need to\nobtain the signing key and certificate chain and\n',(0,a.jsx)(n.a,{href:"/directory/docs/client-config#strong-credentials",children:"configure your X.500 CLI"})," to use them.\nThis is only necessary for the commands that begin with ",(0,a.jsx)(n.code,{children:"x500 dop"}),". Other\ncommands in this section can be executed using normal authentication."]}),"\n",(0,a.jsx)(n.h2,{id:"scenario-and-setup-for-both-approaches",children:"Scenario and Setup for Both Approaches"}),"\n",(0,a.jsx)(n.p,{children:"First, we create an entry. It could be a first level entry, but in our case, we\nwill add a deeper entry. This entry will represent the North American Directory\nForm (NADF), which is a real organization that once existed long ago for\npromoting the X.500 directory standards."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"x500 dap add org 'c=US,o=NADF' --organizationName=NADF\n"})}),"\n",(0,a.jsxs)(n.p,{children:["We will pretend that this organization is a conglomeration of other\norganizations (which might have been true). As such, for an organization to\nformally join the NADF, they would have to have an entry of object class\n",(0,a.jsx)(n.code,{children:"organization"})," beneath the NADF's entry in the DIT. We will make NADF an NSSR\nin an NHOB (take some time to digest those acronyms if you need), so that\nmultiple DSAs can host the organization entries that are immediately subordinate\nto the ",(0,a.jsx)(n.code,{children:"c=US,o=NADF"})," entry."]}),"\n",(0,a.jsx)(n.p,{children:"We will refer to these two fictional subordinate DSAs by their AE-titles:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"c=US,st=GA,l=Atlanta,cn=Atlanta DSA"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"c=US,st=VA,l=Norfolk,cn=Norfolk DSA"})}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["The root DSA will be: ",(0,a.jsx)(n.code,{children:"cn=dsa01.root.mkdemo.wildboar.software"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"procedures-for-superior-initiated-nhobs",children:"Procedures for Superior-Initiated NHOBs"}),"\n",(0,a.jsx)(n.p,{children:"In Meerkat DSA, establishing the NHOB from the superior is a simple\none-line command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"x500 dop become nssr 'c=US,o=NADF' 'c=US,st=GA,l=Atlanta,cn=Atlanta DSA' --naddr=idms://dsa.atlanta.gov:44632\n"})}),"\n",(0,a.jsx)(n.p,{children:"We can break down this command like so:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"x500"}),": the name of the excutable"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"dop"}),": Directory Operational Binding Management subcommands"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"become nssr"}),": Establish a new NHOB by making a DSE an NSSR with respect to a subordinate DSA"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"c=US,o=NADF"}),": The entry that we want to become the NSSR"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"c=US,st=GA,l=Atlanta,cn=Atlanta DSA"}),": The AE-title of the subordinate DSA"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"--naddr=idms://dsa.atlanta.gov:44632"}),": At least one network address where the subordinate DSA can be reached"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"When this command is executed, the X.500 CLI will send a Relayed DOP request\nto your local Meerkat DSA. Meerkat DSA will then modify this DOP request,\nfilling in details, re-sign it, and submit it to the DSA indicated."}),"\n",(0,a.jsxs)(n.p,{children:["The AE-title provided in the command above is required both for the DSA to\nperform strong authentication and because the AE title is a required part of\nthe ",(0,a.jsx)(n.code,{children:"AccessPoint"})," construct used in X.500 directories."]}),"\n",(0,a.jsxs)(n.p,{children:["After you have ran this command, ",(0,a.jsx)(n.code,{children:"c=US,o=NADF"})," will be an NSSR, and it will\nsearch for its subordinates in one or more subordinate DSAs. If the subordinate\nDSA is a Meerkat DSA instance, it will automatically add any non-existing\nentries in the context prefix; so the subordinate DSA in this example will also\nhave ",(0,a.jsx)(n.code,{children:"C=US,o=NADF"}),", but these will only be DSEs of type ",(0,a.jsx)(n.code,{children:"glue"}),", ",(0,a.jsx)(n.code,{children:"admPoint"}),",\n",(0,a.jsx)(n.code,{children:"rhob"}),", etc. (unless they already existed as something else) as are usually\ncreated by hierarchical operational bindings. This also means that you can add\nentries beneath this prefix within the subordinate DSA now."]}),"\n",(0,a.jsxs)(n.p,{children:["The command above may be run multiple times for the same NSSR. So even though\nthe name of the command is ",(0,a.jsx)(n.code,{children:"x500 dop become nssr"}),", it will work fine even if the\ntargeted DSE is already an NSSR."]}),"\n",(0,a.jsxs)(n.p,{children:["Let's say we add an entry ",(0,a.jsx)(n.strong,{children:"to the Atlanta DSA"}),", like so:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"x500 dap add org 'c=US,o=NADF,o=Wildboar Software' --organizationName='Wildboar Software'\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Now, when you use the ",(0,a.jsx)(n.code,{children:"list"})," operation to list the subordinates of ",(0,a.jsx)(n.code,{children:"c=US,o=NADF"}),",\nyour request will be continued--if permitted by access control and other\nconfiguration--into the subordinate DSAs to obtain the complete list of all\nsubordinate entries. There is only ",(0,a.jsx)(n.code,{children:"o=Wildboar Software"})," in our case."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"$ x500 dap list 'c=US,o=NADF'\n::::BEGIN LIST RESULT:::::\n(Composed of the next 1 uncorrelated result sets)\n:::::BEGIN LIST RESULT:::::\nALIAS DEREFERENCED: FALSE\nPERFORMER: c=US,st=GA,l=Atlanta,cn=Atlanta DSA\nSECURITY PARAMETERS\n| NAME: cn=dsa01.root.mkdemo.wildboar.software\n| TIME: Thu Apr 20 2023 08:19:39 GMT-0400 (Eastern Daylight Time)\n| RANDOM: 11001001101111110110010001111000\n| TARGET: 1\n| OPCODE: 4\n| ERROR PROTECTION: 1\nSUBORDINATES:\n#0001: - ! o=Wildboar Software\n\n:::::END LIST RESULT:::::\n:::::END LIST RESULT:::::\n\n"})}),"\n",(0,a.jsx)(n.p,{children:"Behaviorally, this may seem just like a normal hierarchical operational binding,\nbut if you add more subordinate DSAs, your requests will fan out into each of\nthem in the process of resolving names or continuing list or search operations."}),"\n",(0,a.jsx)(n.h2,{id:"procedures-for-subordinate-initiated-nhobs",children:"Procedures for Subordinate-Initiated NHOBs"}),"\n",(0,a.jsx)(n.p,{children:"Joining an NSSR as a subordinate DSA is also a one-line command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"x500 dop join nssr 'c=US,o=NADF' 'cn=dsa01.root.mkdemo.wildboar.software' --naddr=idms://dsa01.root.mkdemo.wildboar.software:44632\n"})}),"\n",(0,a.jsx)(n.p,{children:"Note that, in this case, you are binding to the subordinate DSA and therefore,\nyou will need to use the subordinate DSA's signing key and certificate chain\nfor signing the request."}),"\n",(0,a.jsx)(n.p,{children:"After the above command completes, you should be get the same list results as\nshown in the section above."}),"\n",(0,a.jsx)(n.h2,{id:"using-the-addentry-operation-to-add-nhob-subordinate-entries",children:"Using the AddEntry operation to Add NHOB Subordinate Entries"}),"\n",(0,a.jsxs)(n.p,{children:["You may also use the ",(0,a.jsx)(n.code,{children:"addEntry"})," operation to add subordinates to an NHOB. In\nMeerkat DSA, if the immediate superior of the new entry is an NSSR, and if the\n",(0,a.jsx)(n.code,{children:"targetSystem"})," component of the argument is present and refers to one of the\naccess points named as a subordinate in a related NHOB, Meerkat DSA will chain\nthe ",(0,a.jsx)(n.code,{children:"addEntry"})," operation to that subordinate, rather than creating the entry\nlocally or creating a hierarchical operational binding."]}),"\n",(0,a.jsx)(n.p,{children:"Continuing on our previous examples, you might do so like this:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"x500 dap add org 'c=US,o=NADF,o=Dispatch.fm' \\\n  --organizationName='Dispatch.fm' \\\n  --target-ae-title='cn=dispatch.fm' \\\n  --target-naddr=idms://dsa01.dispatch.fm:44632\n"})}),"\n",(0,a.jsxs)(n.p,{children:["If ",(0,a.jsx)(n.code,{children:"dsa01.dispatch.fm"})," already has an NHOB established with the superior DSA,\nthis entry will simply get added in this DSA, rather than establishing a new\nHierarchical Operational Binding (HOB)."]}),"\n",(0,a.jsx)(n.h2,{id:"terminating-an-nhob",children:"Terminating an NHOB"}),"\n",(0,a.jsxs)(n.p,{children:["Terminating an NHOB is easy as well, if you can obtain the operational binding\nidentifier. Continuing on the previous example, if we assume that our root DSA's\noperational binding established with ",(0,a.jsx)(n.code,{children:"dispatch.fm"})," has an operational binding\nidentifier of ",(0,a.jsx)(n.code,{children:"12345"}),", this command will terminate that operational binding:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"x500 dop terminate '2.5.19.3' 12345 'cn=dispatch.fm'\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The above command almost speaks for itself except for the ",(0,a.jsx)(n.code,{children:"2.5.19.3"}),". This is\nthe object identifier of the NHOB operational binding type. The final argument\nis the AE-title of the DSA with whom the operational binding shall be\nterminated."]})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}}}]);