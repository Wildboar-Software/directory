"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4423],{1184(e,n,t){t.d(n,{R:()=>s,x:()=>d});var o=t(4041);const i={},r=o.createContext(i);function s(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(r.Provider,{value:n},e.children)}},2633(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"development","title":"Development","description":"Documentation","source":"@site/docs/development.md","sourceDirName":".","slug":"/development","permalink":"/directory/docs/development","draft":false,"unlisted":false,"editUrl":"https://github.com/Wildboar-Software/directory/edit/main/website/docs/development.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Versioning","permalink":"/directory/docs/versioning"},"next":{"title":"Support / Help","permalink":"/directory/docs/support"}}');var i=t(1085),r=t(1184);const s={},d="Development",c={},a=[{value:"Documentation",id:"documentation",level:2},{value:"Building",id:"building",level:2},{value:"Debian Package",id:"debian-package",level:3},{value:"RPM Package",id:"rpm-package",level:3}];function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"development",children:"Development"})}),"\n",(0,i.jsx)(n.h2,{id:"documentation",children:"Documentation"}),"\n",(0,i.jsxs)(n.p,{children:["Note that for all changes you make to ",(0,i.jsx)(n.code,{children:"meerkat-docs"}),", there may be equivalent\ndocumentation in ",(0,i.jsx)(n.code,{children:"docs"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"building",children:"Building"}),"\n",(0,i.jsx)(n.h3,{id:"debian-package",children:"Debian Package"}),"\n",(0,i.jsxs)(n.p,{children:["Run ",(0,i.jsx)(n.code,{children:"./scripts/build-debian.sh"}),", then run ",(0,i.jsx)(n.code,{children:"dpkg-buildpackage -us -uc"}),", both in\nthe root directory of the project. Note that this will clean the source tree, so\nyou will lose some files and folders like ",(0,i.jsx)(n.code,{children:"node_modules"})," and ",(0,i.jsx)(n.code,{children:"dist"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["If you build this directly on the host system, you will have to make sure that\nthe version of NodeJS you compile against is the exact same one that it actually\nruns on. The Debian package is hard-coded to run ",(0,i.jsx)(n.code,{children:"/usr/bin/node"}),", but a lot of\nNodeJS installations nowadays use NVM to version NodeJS. Run ",(0,i.jsx)(n.code,{children:"which node"})," to\nsee if you're using it. You might need to run ",(0,i.jsx)(n.code,{children:"nvm use 20.19.1"})," (or something\nlike that) ",(0,i.jsx)(n.em,{children:"before"})," you even build the package. Then run it."]}),"\n",(0,i.jsx)(n.h3,{id:"rpm-package",children:"RPM Package"}),"\n",(0,i.jsx)(n.p,{children:"Run"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'./scripts/build-rpm.sh\npodman build -t meerkat-rpm-builder -f pkg/rpmbuilder.dockerfile .\npodman run --rm -it -v "$PWD:/src" -v "$PWD/rpmbuild:/root/rpmbuild" meerkat-rpm-builder rpmbuild -ba /src/pkg/meerkat.spec\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If using Docker, replace ",(0,i.jsx)(n.code,{children:"podman"})," with ",(0,i.jsx)(n.code,{children:"docker"}),". It should be a drop-in\nreplacement."]}),"\n",(0,i.jsxs)(n.p,{children:["You might see a ton of warnings pertaining to the executable bit being set on\nJavascript files. This is a bug with JSR, which I reported\n",(0,i.jsx)(n.a,{href:"https://github.com/jsr-io/jsr/issues/1246",children:"here"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Note that the ",(0,i.jsx)(n.code,{children:"fedora"})," container image has a file ",(0,i.jsx)(n.code,{children:"/etc/dnf/dnf.conf"})," that, by\ndefault excludes the installation of documentation from RPMs. You will need to\nmodify the ",(0,i.jsx)(n.code,{children:"tsflags"})," option to remove ",(0,i.jsx)(n.code,{children:"nodocs"})," if you want to see your man pages\nshow up. This took me ",(0,i.jsx)(n.em,{children:"days"})," to figure out."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);